jQuery(document).ready(function(e){function t(){e(this).dialog("destroy")}function n(e,t){var n;n=new google.maps.Geocoder,n.geocode({address:e},function(e,n){var a=document.getElementById("js_event_location_map_"+t),i=new google.maps.LatLng(getLatLong.lat,getLatLong["long"]),o={center:i,zoom:8,mapTypeId:google.maps.MapTypeId.ROADMAP},d=new google.maps.Map(a,o);if(n===google.maps.GeocoderStatus.OK){d.setCenter(e[0].geometry.location);new google.maps.Marker({map:d,position:e[0].geometry.location})}})}function a(){gapi.load("client:auth2",i)}function i(){gapi.client.init({apiKey:r,clientId:g,discoveryDocs:l,scope:m}).then(function(){gapi.auth2.getAuthInstance().isSignedIn.listen(o()),o()})}function o(){var e=gapi.auth2.getAuthInstance().isSignedIn.get();e||d()}function d(){gapi.auth2.getAuthInstance().signIn()}function c(e){var t=gapi.client.calendar.events.insert({calendarId:"primary",summary:e.summary,location:e.location,start:{dateTime:e.startDateTime},end:{dateTime:e.endDateTime}});t.execute(function(e){e.htmlLink?alert(JDCalendarEventObject.event_inserted):alert(JDCalendarEventObject.event_failed+" "+e.message)})}var s=e("body");s.on("click",".jd-event-show-google-map",function(){var a=e(this),i=a.attr("id"),o=a.parents("article.jd-event-listing"),d=o.find(".jd_event_address").text(),c=o.find("#jd-event-google-map-modal");n(d,i),c.dialog({width:500,height:400,closeOnEscape:!0,close:t})}),s.on("click",".jd-event-google-calendar",function(){var t=e(this),n=t.parents("article.jd-event-listing"),a=n.find(".event-title-summary").data("summary"),i=n.find(".jd_event_address").text(),o=n.find(".event_date").data("start_time"),d=n.find(".event_date").data("end_time"),s={summary:a,location:i,startDateTime:o,endDateTime:d},g=gapi.auth2.getAuthInstance().isSignedIn.get();g?c(s):alert(JDCalendarEventObject.google_authorize)});var g=JDCalendarEventObject.client_id,r=JDCalendarEventObject.api_key,l=["https://www.googleapis.com/discovery/v1/apis/calendar/v3/rest"],m="https://www.googleapis.com/auth/calendar";window.onload=function(){""!==g&&""!==r&&a()}});